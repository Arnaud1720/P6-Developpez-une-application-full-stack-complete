<app-header></app-header>
<div class="posts-container">
  <!-- Contrôles existants -->
  <div class="posts-controls">
    <button mat-raised-button color="primary" routerLink="/add-post">
      Créer un article
    </button>

    <button mat-button (click)="toggleOrder()" class="sort-button">
      Trier par date
      <mat-icon>{{ asc ? 'arrow_drop_up' : 'arrow_drop_down' }}</mat-icon>
    </button>
  </div>

  <!-- Grille de posts -->
  <div class="posts-grid">
    <mat-card
      *ngFor="let post of posts"
      class="post-card"
      [routerLink]="['/posts', post.id]"
      tabindex="0"
      role="link"
    >
      <mat-card-header>
        <mat-card-title>{{ post.title }}</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <p>{{ post.content }}</p>
      </mat-card-content>

      <mat-card-actions class="post-meta" (click)="$event.stopPropagation()">
        <span>{{ post.createdAt | date:'dd/MM/yyyy' }}</span>
        <span>Auteur : {{ post.authorPseudo || '—' }}</span>
      </mat-card-actions>
    </mat-card>
  </div>

  <mat-progress-spinner
    *ngIf="loading"
    mode="indeterminate"
    class="spinner">
  </mat-progress-spinner>

  <div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
</div>
